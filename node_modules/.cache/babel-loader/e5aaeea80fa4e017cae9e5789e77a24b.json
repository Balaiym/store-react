{"ast":null,"code":"import { createAsyncThunk, createSlice } from '@reduxjs/toolkit';\nimport { AlertType } from '../types/common';\nimport { showAlert } from './CommonSlice';\nimport { ADDED_TO_WISHLIST, REMOVED_FROM_WISHLIST } from '../constants/messages';\nconst initialState = {\n  wishlist: [],\n  cart: []\n};\nexport const setToLocalStorage = createAsyncThunk('user/setToLS', async (key, _ref) => {\n  let {\n    getState\n  } = _ref;\n  const {\n    user: {\n      wishlist,\n      cart\n    }\n  } = getState();\n\n  if (key === 'wishlist') {\n    localStorage.setItem(key, JSON.stringify(wishlist));\n  }\n\n  if (key === 'cart') {\n    localStorage.setItem(key, JSON.stringify(cart));\n  }\n});\nexport const getFromLocalStorage = createAsyncThunk('user/setWishlistToLS', async (key, _ref2) => {\n  let {\n    dispatch\n  } = _ref2;\n\n  if (key === 'wishlist') {\n    const wishlist = JSON.parse(localStorage.getItem(key));\n    if (!wishlist) return;\n    dispatch(setWishlist(wishlist));\n  }\n\n  if (key === 'cart') {\n    const cart = JSON.parse(localStorage.getItem(key));\n    if (!cart) return;\n    dispatch(setProductsToCart(cart));\n  }\n});\nexport const wishListHandler = createAsyncThunk('user/wishListHandler', (_ref3, _ref4) => {\n  let {\n    id,\n    isWished\n  } = _ref3;\n  let {\n    dispatch\n  } = _ref4;\n  dispatch(handleWishlist(id));\n  dispatch(setToLocalStorage('wishlist'));\n\n  if (isWished) {\n    dispatch(showAlert({\n      type: AlertType.Info,\n      message: REMOVED_FROM_WISHLIST\n    }));\n  } else {\n    dispatch(showAlert({\n      type: AlertType.Success,\n      message: ADDED_TO_WISHLIST,\n      action: 'wishlist'\n    }));\n  }\n});\nexport const userSlice = createSlice({\n  name: 'user',\n  initialState,\n  reducers: {\n    setWishlist: (state, action) => {\n      state.wishlist = action.payload;\n    },\n    handleWishlist: (state, action) => {\n      const isProductLiked = state.wishlist.find(wish => wish === action.payload);\n\n      if (isProductLiked) {\n        const updatedWishlist = state.wishlist.filter(wish => wish !== action.payload);\n        state.wishlist = updatedWishlist;\n        return;\n      }\n\n      state.wishlist.push(action.payload);\n    },\n    setProductsToCart: (state, action) => {\n      state.cart = action.payload;\n    },\n    setProductToCart: (state, action) => {\n      const product = { ...action.payload\n      };\n\n      if (product.discountedPrice !== undefined) {\n        product.profit = product.price - product.discountedPrice;\n        product.totalPrice = product.discountedPrice;\n      }\n\n      state.cart.push(product);\n    },\n    increment: (state, action) => {\n      const product = state.cart.find(cartItem => cartItem.productId === action.payload);\n      if (!product) return;\n      product.totalWeight += product.weight;\n      product.quantity++;\n\n      if (product.discountedPrice !== undefined) {\n        product.totalPrice += product.discountedPrice;\n        product.profit = product.quantity * (product.price - product.discountedPrice);\n        return;\n      }\n\n      product.totalPrice += product.price;\n    },\n    decrement: (state, action) => {\n      const product = state.cart.find(cartItem => cartItem.productId === action.payload);\n      if (!product) return;\n      product.totalWeight -= product.weight;\n      product.quantity--;\n\n      if (product.discountedPrice !== undefined) {\n        product.totalPrice -= product.discountedPrice;\n        product.profit = product.quantity * (product.price - product.discountedPrice);\n        return;\n      }\n\n      product.totalPrice -= product.price;\n    },\n    removeProductFromCart: (state, action) => {\n      const updatedCart = state.cart.filter(cartItem => cartItem.productId !== action.payload);\n      state.cart = updatedCart;\n    },\n    clearCart: state => {\n      state.cart = initialState.cart;\n    }\n  }\n});\nexport const {\n  handleWishlist,\n  setWishlist,\n  setProductToCart,\n  increment,\n  decrement,\n  removeProductFromCart,\n  clearCart,\n  setProductsToCart\n} = userSlice.actions;\nexport default userSlice.reducer;","map":{"version":3,"names":["createAsyncThunk","createSlice","AlertType","showAlert","ADDED_TO_WISHLIST","REMOVED_FROM_WISHLIST","initialState","wishlist","cart","setToLocalStorage","key","getState","user","localStorage","setItem","JSON","stringify","getFromLocalStorage","dispatch","parse","getItem","setWishlist","setProductsToCart","wishListHandler","id","isWished","handleWishlist","type","Info","message","Success","action","userSlice","name","reducers","state","payload","isProductLiked","find","wish","updatedWishlist","filter","push","setProductToCart","product","discountedPrice","undefined","profit","price","totalPrice","increment","cartItem","productId","totalWeight","weight","quantity","decrement","removeProductFromCart","updatedCart","clearCart","actions","reducer"],"sources":["C:/Users/Acer/Desktop/e-commerce-react-app-master/src/store/UserSlice.ts"],"sourcesContent":["import { createAsyncThunk, createSlice } from '@reduxjs/toolkit';\n\nimport type { PayloadAction } from '@reduxjs/toolkit';\nimport { AlertType, CartItem, Product } from '../types/common';\nimport { RootState } from './store';\nimport { showAlert } from './CommonSlice';\nimport { ADDED_TO_WISHLIST, REMOVED_FROM_WISHLIST } from '../constants/messages';\n\ntype WishList = Product['id'][];\n\nexport type UserState = {\n  wishlist: WishList;\n  cart: CartItem[];\n};\n\nconst initialState: UserState = {\n  wishlist: [],\n  cart: [],\n};\n\nexport const setToLocalStorage = createAsyncThunk<void, string, { state: RootState }>(\n  'user/setToLS',\n  async (key, { getState }) => {\n    const {\n      user: { wishlist, cart },\n    } = getState();\n\n    if (key === 'wishlist') {\n      localStorage.setItem(key, JSON.stringify(wishlist));\n    }\n\n    if (key === 'cart') {\n      localStorage.setItem(key, JSON.stringify(cart));\n    }\n  }\n);\n\nexport const getFromLocalStorage = createAsyncThunk<void, string>('user/setWishlistToLS', async (key, { dispatch }) => {\n  if (key === 'wishlist') {\n    const wishlist = JSON.parse(localStorage.getItem(key) as any);\n    if (!wishlist) return;\n    dispatch(setWishlist(wishlist));\n  }\n\n  if (key === 'cart') {\n    const cart = JSON.parse(localStorage.getItem(key) as any);\n    if (!cart) return;\n    dispatch(setProductsToCart(cart));\n  }\n});\n\nexport const wishListHandler = createAsyncThunk<void, { id: string; isWished: boolean }, { state: RootState }>(\n  'user/wishListHandler',\n  ({ id, isWished }, { dispatch }) => {\n    dispatch(handleWishlist(id));\n    dispatch(setToLocalStorage('wishlist'));\n\n    if (isWished) {\n      dispatch(showAlert({ type: AlertType.Info, message: REMOVED_FROM_WISHLIST }));\n    } else {\n      dispatch(showAlert({ type: AlertType.Success, message: ADDED_TO_WISHLIST, action: 'wishlist' }));\n    }\n  }\n);\n\nexport const userSlice = createSlice({\n  name: 'user',\n  initialState,\n  reducers: {\n    setWishlist: (state, action) => {\n      state.wishlist = action.payload;\n    },\n\n    handleWishlist: (state, action: PayloadAction<Product['id']>) => {\n      const isProductLiked = state.wishlist.find((wish) => wish === action.payload);\n      if (isProductLiked) {\n        const updatedWishlist = state.wishlist.filter((wish) => wish !== action.payload);\n        state.wishlist = updatedWishlist;\n        return;\n      }\n      state.wishlist.push(action.payload);\n    },\n\n    setProductsToCart: (state, action: PayloadAction<CartItem[]>) => {\n      state.cart = action.payload;\n    },\n\n    setProductToCart: (state, action: PayloadAction<CartItem>) => {\n      const product = { ...action.payload };\n\n      if (product.discountedPrice !== undefined) {\n        product.profit = product.price - product.discountedPrice;\n        product.totalPrice = product.discountedPrice;\n      }\n\n      state.cart.push(product);\n    },\n\n    increment: (state, action: PayloadAction<CartItem['productId']>) => {\n      const product = state.cart.find((cartItem) => cartItem.productId === action.payload);\n      if (!product) return;\n\n      product.totalWeight += product.weight;\n      product.quantity++;\n\n      if (product.discountedPrice !== undefined) {\n        product.totalPrice += product.discountedPrice;\n        product.profit = product.quantity * (product.price - product.discountedPrice);\n        return;\n      }\n\n      product.totalPrice += product.price;\n    },\n\n    decrement: (state, action: PayloadAction<CartItem['productId']>) => {\n      const product = state.cart.find((cartItem) => cartItem.productId === action.payload);\n      if (!product) return;\n      product.totalWeight -= product.weight;\n      product.quantity--;\n\n      if (product.discountedPrice !== undefined) {\n        product.totalPrice -= product.discountedPrice;\n        product.profit = product.quantity * (product.price - product.discountedPrice);\n        return;\n      }\n\n      product.totalPrice -= product.price;\n    },\n\n    removeProductFromCart: (state, action: PayloadAction<CartItem['productId']>) => {\n      const updatedCart = state.cart.filter((cartItem) => cartItem.productId !== action.payload);\n      state.cart = updatedCart;\n    },\n\n    clearCart: (state) => {\n      state.cart = initialState.cart;\n    },\n  },\n});\n\nexport const {\n  handleWishlist,\n  setWishlist,\n  setProductToCart,\n  increment,\n  decrement,\n  removeProductFromCart,\n  clearCart,\n  setProductsToCart,\n} = userSlice.actions;\n\nexport default userSlice.reducer;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}