{"ast":null,"code":"import { createAsyncThunk, createSlice } from '@reduxjs/toolkit';\nimport { AlertType } from '../types/common';\nimport { handleObj, wait } from '../utils/helpers';\nimport { CREATE_ORDER_ERROR_MESSAGE, FETCH_ORDERS_ERROR_MESSAGE } from '../constants/messages';\nconst initialState = {\n  alert: {\n    type: AlertType.Info,\n    message: ''\n  },\n  orders: [],\n  isLoading: false,\n  error: {\n    isError: false,\n    message: ''\n  }\n};\nconst BASE_URL = 'https://e-commerce-65446-default-rtdb.firebaseio.com';\nexport const fetchOrders = createAsyncThunk('common/fetchOrders', async (_, _ref) => {\n  let {\n    dispatch,\n    rejectWithValue\n  } = _ref;\n  const response = await fetch(`${BASE_URL}/orders.json`);\n\n  if (!response.ok) {\n    dispatch(showAlert({\n      type: AlertType.Error,\n      message: FETCH_ORDERS_ERROR_MESSAGE\n    }));\n    return rejectWithValue(FETCH_ORDERS_ERROR_MESSAGE);\n  }\n\n  const data = await response.json();\n  const brands = handleObj(data);\n  return brands;\n});\nexport const createOrder = createAsyncThunk('common/createOrder', async (order, _ref2) => {\n  let {\n    dispatch,\n    rejectWithValue\n  } = _ref2;\n  const response = await fetch(`${BASE_URL}/orders.json`, {\n    method: 'POST',\n    headers: {\n      'Content-type': 'application/json'\n    },\n    body: JSON.stringify(order)\n  });\n\n  if (!response.ok) {\n    dispatch(showAlert({\n      type: AlertType.Error,\n      message: CREATE_ORDER_ERROR_MESSAGE\n    }));\n    return rejectWithValue(CREATE_ORDER_ERROR_MESSAGE);\n  }\n\n  const data = await response.json();\n  return {\n    id: data.name,\n    ...order\n  };\n});\nexport const showAlert = createAsyncThunk('common/handleAlert', async (alert, _ref3) => {\n  let {\n    dispatch\n  } = _ref3;\n  dispatch(setAlert(alert));\n  await wait(2500);\n  dispatch(hideAlert());\n});\nexport const commonSlice = createSlice({\n  name: 'common',\n  initialState,\n  reducers: {\n    setAlert: (state, action) => {\n      state.alert = action.payload;\n    },\n    hideAlert: state => {\n      state.alert = initialState.alert;\n    }\n  },\n  extraReducers: builder => {\n    builder.addCase(fetchOrders.pending, state => {\n      state.isLoading = true;\n    });\n    builder.addCase(fetchOrders.fulfilled, (state, _ref4) => {\n      let {\n        payload\n      } = _ref4;\n      state.orders = payload;\n      state.isLoading = false;\n    });\n    builder.addCase(fetchOrders.rejected, (state, _ref5) => {\n      let {\n        payload\n      } = _ref5;\n      state.error = {\n        isError: true,\n        message: payload\n      };\n      state.isLoading = false;\n    });\n    builder.addCase(createOrder.pending, state => {\n      state.isLoading = true;\n    });\n    builder.addCase(createOrder.fulfilled, (state, _ref6) => {\n      let {\n        payload\n      } = _ref6;\n      state.isLoading = false;\n    });\n    builder.addCase(createOrder.rejected, (state, _ref7) => {\n      let {\n        payload\n      } = _ref7;\n      state.error = {\n        isError: true,\n        message: payload\n      };\n      state.isLoading = false;\n    });\n  }\n});\nexport const {\n  setAlert,\n  hideAlert\n} = commonSlice.actions;\nexport default commonSlice.reducer;","map":{"version":3,"names":["createAsyncThunk","createSlice","AlertType","handleObj","wait","CREATE_ORDER_ERROR_MESSAGE","FETCH_ORDERS_ERROR_MESSAGE","initialState","alert","type","Info","message","orders","isLoading","error","isError","BASE_URL","fetchOrders","_","dispatch","rejectWithValue","response","fetch","ok","showAlert","Error","data","json","brands","createOrder","order","method","headers","body","JSON","stringify","id","name","setAlert","hideAlert","commonSlice","reducers","state","action","payload","extraReducers","builder","addCase","pending","fulfilled","rejected","actions","reducer"],"sources":["C:/Users/Acer/Desktop/e-commerce-react-app-master/src/store/CommonSlice.ts"],"sourcesContent":["import { createAsyncThunk, createSlice } from '@reduxjs/toolkit';\n\nimport type { PayloadAction } from '@reduxjs/toolkit';\nimport { Alert, AlertType, Error, Order } from '../types/common';\nimport { handleObj, wait } from '../utils/helpers';\nimport { CREATE_ORDER_ERROR_MESSAGE, FETCH_ORDERS_ERROR_MESSAGE } from '../constants/messages';\n\nexport type CommonState = {\n  alert: Alert;\n  orders: Order[];\n  isLoading: boolean;\n  error: Error;\n};\n\nconst initialState: CommonState = {\n  alert: {\n    type: AlertType.Info,\n    message: '',\n  },\n  orders: [],\n  isLoading: false,\n  error: {\n    isError: false,\n    message: '',\n  },\n};\n\nconst BASE_URL = 'https://e-commerce-65446-default-rtdb.firebaseio.com';\n\nexport const fetchOrders = createAsyncThunk('common/fetchOrders', async (_, { dispatch, rejectWithValue }) => {\n  const response = await fetch(`${BASE_URL}/orders.json`);\n\n  if (!response.ok) {\n    dispatch(showAlert({ type: AlertType.Error, message: FETCH_ORDERS_ERROR_MESSAGE }));\n    return rejectWithValue(FETCH_ORDERS_ERROR_MESSAGE);\n  }\n\n  const data = await response.json();\n  const brands: Order[] = handleObj(data);\n  return brands;\n});\n\nexport const createOrder = createAsyncThunk(\n  'common/createOrder',\n  async (order: Partial<Order>, { dispatch, rejectWithValue }) => {\n    const response = await fetch(`${BASE_URL}/orders.json`, {\n      method: 'POST',\n      headers: {\n        'Content-type': 'application/json',\n      },\n      body: JSON.stringify(order),\n    });\n\n    if (!response.ok) {\n      dispatch(showAlert({ type: AlertType.Error, message: CREATE_ORDER_ERROR_MESSAGE }));\n      return rejectWithValue(CREATE_ORDER_ERROR_MESSAGE);\n    }\n\n    const data: { name: string } = await response.json();\n    return { id: data.name, ...order } as Order;\n  }\n);\n\nexport const showAlert = createAsyncThunk('common/handleAlert', async (alert: Alert, { dispatch }) => {\n  dispatch(setAlert(alert));\n  await wait(2500);\n  dispatch(hideAlert());\n});\n\nexport const commonSlice = createSlice({\n  name: 'common',\n  initialState,\n  reducers: {\n    setAlert: (state, action: PayloadAction<Alert>) => {\n      state.alert = action.payload;\n    },\n\n    hideAlert: (state) => {\n      state.alert = initialState.alert;\n    },\n  },\n\n  extraReducers: (builder) => {\n    builder.addCase(fetchOrders.pending, (state) => {\n      state.isLoading = true;\n    });\n\n    builder.addCase(fetchOrders.fulfilled, (state, { payload }) => {\n      state.orders = payload;\n      state.isLoading = false;\n    });\n\n    builder.addCase(fetchOrders.rejected, (state, { payload }) => {\n      state.error = {\n        isError: true,\n        message: payload as Error['message'],\n      };\n      state.isLoading = false;\n    });\n\n    builder.addCase(createOrder.pending, (state) => {\n      state.isLoading = true;\n    });\n\n    builder.addCase(createOrder.fulfilled, (state, { payload }) => {\n      state.isLoading = false;\n    });\n\n    builder.addCase(createOrder.rejected, (state, { payload }) => {\n      state.error = {\n        isError: true,\n        message: payload as Error['message'],\n      };\n      state.isLoading = false;\n    });\n  },\n});\n\nexport const { setAlert, hideAlert } = commonSlice.actions;\n\nexport default commonSlice.reducer;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}