{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Acer\\\\Desktop\\\\e-commerce-react-app-master\\\\src\\\\components\\\\showcase\\\\ProductCardList\\\\ProductCardList.tsx\",\n    _s = $RefreshSig$();\n\nimport { useEffect, useState } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { useParams } from 'react-router-dom';\nimport { wishListHandler } from '../../../store/UserSlice';\nimport LoadMore from '../../UI/LoadMore/LoadMore';\nimport ProductCard from '../ProductCard/ProductCard';\nimport classes from './ProductCardList.module.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst PRODUCT_LIST_LIMIT = 12;\n\nconst ProductCardList = _ref => {\n  _s();\n\n  let {\n    products\n  } = _ref;\n  const dispatch = useDispatch();\n  const {\n    url\n  } = useParams();\n  const {\n    wishlist\n  } = useSelector(state => state.user);\n  const [productsToRender, setProductsToRender] = useState([]);\n  const [count, setCount] = useState(PRODUCT_LIST_LIMIT);\n  const isLoadMoreVisible = products.length > count;\n  const [sortInDescendingOrder, setSortInDescendingOrder] = useState(false);\n  const [sorted, setSorted] = useState([]);\n  const sortedProducts = products.sort((a, b) => {\n    var _a$discount, _b$discount;\n\n    let x = a.price;\n    let y = b.price;\n\n    if (((_a$discount = a.discount) === null || _a$discount === void 0 ? void 0 : _a$discount.discountedPrice) !== undefined) {\n      var _a$discount2;\n\n      x = (_a$discount2 = a.discount) === null || _a$discount2 === void 0 ? void 0 : _a$discount2.discountedPrice;\n    }\n\n    if (((_b$discount = b.discount) === null || _b$discount === void 0 ? void 0 : _b$discount.discountedPrice) !== undefined) {\n      var _b$discount2;\n\n      y = (_b$discount2 = b.discount) === null || _b$discount2 === void 0 ? void 0 : _b$discount2.discountedPrice;\n    }\n\n    if (sortInDescendingOrder) {\n      return y - x;\n    }\n\n    return x - y;\n  });\n\n  const sort = () => {\n    setSorted(sortedProducts);\n  };\n\n  useEffect(() => {\n    if (sorted.length > 0) {\n      setProductsToRender(sortedProducts.slice(0, count));\n    }\n  }, [sorted, sortedProducts, sortInDescendingOrder, count]);\n  useEffect(() => {\n    setProductsToRender(sortedProducts.slice(0, PRODUCT_LIST_LIMIT));\n    setCount(PRODUCT_LIST_LIMIT);\n  }, [sortedProducts]);\n  useEffect(() => {\n    setSortInDescendingOrder(false);\n  }, [url]);\n\n  const handleWishlist = id => {\n    const isWished = wishlist.includes(id);\n    dispatch(wishListHandler({\n      id,\n      isWished\n    }));\n  };\n\n  const showMoreHandler = count => {\n    setCount(count);\n    const list = sortedProducts.slice(0, count);\n    setProductsToRender(list);\n  };\n\n  useEffect(() => {\n    setProductsToRender(sortedProducts.slice(0, PRODUCT_LIST_LIMIT));\n  }, [sortedProducts]);\n\n  const toggleSorting = () => {\n    setSortInDescendingOrder(prev => !prev);\n    sort();\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: classes['product-card-list'],\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: classes['list-wrapper'],\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: classes['sort-wrapper'],\n        children: /*#__PURE__*/_jsxDEV(\"span\", {\n          className: classes.sort,\n          onClick: toggleSorting,\n          children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n            children: \"\\u0421\\u043D\\u0430\\u0447\\u0430\\u043B\\u0430 \\u043F\\u043E\\u043A\\u0430\\u0437\\u044B\\u0432\\u0430\\u0442\\u044C:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 88,\n            columnNumber: 13\n          }, this), \" \", sortInDescendingOrder ? 'подороже' : 'подешевле']\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 87,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 86,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n        className: classes.list,\n        children: productsToRender.map(product => /*#__PURE__*/_jsxDEV(ProductCard, {\n          name: product.name,\n          price: product.price,\n          image: product.image,\n          discount: product.discount,\n          brand: product.brand,\n          category: product.category,\n          onWishlistClick: () => handleWishlist(product.id),\n          isAddedToWishlist: wishlist.includes(product.id),\n          id: product.id\n        }, product.id, false, {\n          fileName: _jsxFileName,\n          lineNumber: 94,\n          columnNumber: 13\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 92,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 7\n    }, this), isLoadMoreVisible && /*#__PURE__*/_jsxDEV(LoadMore, {\n      count: count,\n      itemsListLength: products.length,\n      onClick: showMoreHandler,\n      itemsLimit: PRODUCT_LIST_LIMIT\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 111,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 84,\n    columnNumber: 5\n  }, this);\n};\n\n_s(ProductCardList, \"ncGonrihLna9eDbsb75mSzDcUMQ=\", false, function () {\n  return [useDispatch, useParams, useSelector];\n});\n\n_c = ProductCardList;\nexport default ProductCardList;\n\nvar _c;\n\n$RefreshReg$(_c, \"ProductCardList\");","map":{"version":3,"names":["useEffect","useState","useDispatch","useSelector","useParams","wishListHandler","LoadMore","ProductCard","classes","PRODUCT_LIST_LIMIT","ProductCardList","products","dispatch","url","wishlist","state","user","productsToRender","setProductsToRender","count","setCount","isLoadMoreVisible","length","sortInDescendingOrder","setSortInDescendingOrder","sorted","setSorted","sortedProducts","sort","a","b","x","price","y","discount","discountedPrice","undefined","slice","handleWishlist","id","isWished","includes","showMoreHandler","list","toggleSorting","prev","map","product","name","image","brand","category"],"sources":["C:/Users/Acer/Desktop/e-commerce-react-app-master/src/components/showcase/ProductCardList/ProductCardList.tsx"],"sourcesContent":["import { useEffect, useState } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { useParams } from 'react-router-dom';\nimport { AppDispatch, RootState } from '../../../store/store';\nimport { wishListHandler } from '../../../store/UserSlice';\nimport { Product } from '../../../types/common';\nimport LoadMore from '../../UI/LoadMore/LoadMore';\nimport ProductCard from '../ProductCard/ProductCard';\nimport classes from './ProductCardList.module.css';\n\ninterface IProductCardListProps {\n  products: Product[];\n}\n\nconst PRODUCT_LIST_LIMIT = 12;\n\nconst ProductCardList: React.FC<IProductCardListProps> = ({ products }) => {\n  const dispatch = useDispatch<AppDispatch>();\n  const { url } = useParams();\n  const { wishlist } = useSelector((state: RootState) => state.user);\n  const [productsToRender, setProductsToRender] = useState<Product[]>([]);\n  const [count, setCount] = useState(PRODUCT_LIST_LIMIT);\n  const isLoadMoreVisible = products.length > count;\n  const [sortInDescendingOrder, setSortInDescendingOrder] = useState(false);\n  const [sorted, setSorted] = useState<Product[]>([]);\n\n  const sortedProducts = products.sort((a, b) => {\n    let x = a.price;\n    let y = b.price;\n    if (a.discount?.discountedPrice !== undefined) {\n      x = a.discount?.discountedPrice;\n    }\n\n    if (b.discount?.discountedPrice !== undefined) {\n      y = b.discount?.discountedPrice;\n    }\n\n    if (sortInDescendingOrder) {\n      return y - x;\n    }\n    return x - y;\n  });\n\n  const sort = () => {\n    setSorted(sortedProducts);\n  };\n\n  useEffect(() => {\n    if (sorted.length > 0) {\n      setProductsToRender(sortedProducts.slice(0, count));\n    }\n  }, [sorted, sortedProducts, sortInDescendingOrder, count]);\n\n  useEffect(() => {\n    setProductsToRender(sortedProducts.slice(0, PRODUCT_LIST_LIMIT));\n    setCount(PRODUCT_LIST_LIMIT);\n  }, [sortedProducts]);\n\n  useEffect(() => {\n    setSortInDescendingOrder(false);\n  }, [url]);\n\n  const handleWishlist = (id: Product['id']) => {\n    const isWished = wishlist.includes(id);\n    dispatch(wishListHandler({ id, isWished }));\n  };\n\n  const showMoreHandler = (count: number) => {\n    setCount(count);\n    const list = sortedProducts.slice(0, count);\n    setProductsToRender(list);\n  };\n\n  useEffect(() => {\n    setProductsToRender(sortedProducts.slice(0, PRODUCT_LIST_LIMIT));\n  }, [sortedProducts]);\n\n  const toggleSorting = () => {\n    setSortInDescendingOrder((prev) => !prev);\n    sort();\n  };\n\n  return (\n    <div className={classes['product-card-list']}>\n      <div className={classes['list-wrapper']}>\n        <div className={classes['sort-wrapper']}>\n          <span className={classes.sort} onClick={toggleSorting}>\n            <strong>Сначала показывать:</strong> {sortInDescendingOrder ? 'подороже' : 'подешевле'}\n          </span>\n        </div>\n\n        <ul className={classes.list}>\n          {productsToRender.map((product) => (\n            <ProductCard\n              key={product.id}\n              name={product.name}\n              price={product.price}\n              image={product.image}\n              discount={product.discount}\n              brand={product.brand}\n              category={product.category}\n              onWishlistClick={() => handleWishlist(product.id)}\n              isAddedToWishlist={wishlist.includes(product.id)}\n              id={product.id}\n            />\n          ))}\n        </ul>\n      </div>\n\n      {isLoadMoreVisible && (\n        <LoadMore\n          count={count}\n          itemsListLength={products.length}\n          onClick={showMoreHandler}\n          itemsLimit={PRODUCT_LIST_LIMIT}\n        />\n      )}\n    </div>\n  );\n};\n\nexport default ProductCardList;\n"],"mappings":";;;AAAA,SAASA,SAAT,EAAoBC,QAApB,QAAoC,OAApC;AACA,SAASC,WAAT,EAAsBC,WAAtB,QAAyC,aAAzC;AACA,SAASC,SAAT,QAA0B,kBAA1B;AAEA,SAASC,eAAT,QAAgC,0BAAhC;AAEA,OAAOC,QAAP,MAAqB,4BAArB;AACA,OAAOC,WAAP,MAAwB,4BAAxB;AACA,OAAOC,OAAP,MAAoB,8BAApB;;AAMA,MAAMC,kBAAkB,GAAG,EAA3B;;AAEA,MAAMC,eAAgD,GAAG,QAAkB;EAAA;;EAAA,IAAjB;IAAEC;EAAF,CAAiB;EACzE,MAAMC,QAAQ,GAAGV,WAAW,EAA5B;EACA,MAAM;IAAEW;EAAF,IAAUT,SAAS,EAAzB;EACA,MAAM;IAAEU;EAAF,IAAeX,WAAW,CAAEY,KAAD,IAAsBA,KAAK,CAACC,IAA7B,CAAhC;EACA,MAAM,CAACC,gBAAD,EAAmBC,mBAAnB,IAA0CjB,QAAQ,CAAY,EAAZ,CAAxD;EACA,MAAM,CAACkB,KAAD,EAAQC,QAAR,IAAoBnB,QAAQ,CAACQ,kBAAD,CAAlC;EACA,MAAMY,iBAAiB,GAAGV,QAAQ,CAACW,MAAT,GAAkBH,KAA5C;EACA,MAAM,CAACI,qBAAD,EAAwBC,wBAAxB,IAAoDvB,QAAQ,CAAC,KAAD,CAAlE;EACA,MAAM,CAACwB,MAAD,EAASC,SAAT,IAAsBzB,QAAQ,CAAY,EAAZ,CAApC;EAEA,MAAM0B,cAAc,GAAGhB,QAAQ,CAACiB,IAAT,CAAc,CAACC,CAAD,EAAIC,CAAJ,KAAU;IAAA;;IAC7C,IAAIC,CAAC,GAAGF,CAAC,CAACG,KAAV;IACA,IAAIC,CAAC,GAAGH,CAAC,CAACE,KAAV;;IACA,IAAI,gBAAAH,CAAC,CAACK,QAAF,4DAAYC,eAAZ,MAAgCC,SAApC,EAA+C;MAAA;;MAC7CL,CAAC,mBAAGF,CAAC,CAACK,QAAL,iDAAG,aAAYC,eAAhB;IACD;;IAED,IAAI,gBAAAL,CAAC,CAACI,QAAF,4DAAYC,eAAZ,MAAgCC,SAApC,EAA+C;MAAA;;MAC7CH,CAAC,mBAAGH,CAAC,CAACI,QAAL,iDAAG,aAAYC,eAAhB;IACD;;IAED,IAAIZ,qBAAJ,EAA2B;MACzB,OAAOU,CAAC,GAAGF,CAAX;IACD;;IACD,OAAOA,CAAC,GAAGE,CAAX;EACD,CAfsB,CAAvB;;EAiBA,MAAML,IAAI,GAAG,MAAM;IACjBF,SAAS,CAACC,cAAD,CAAT;EACD,CAFD;;EAIA3B,SAAS,CAAC,MAAM;IACd,IAAIyB,MAAM,CAACH,MAAP,GAAgB,CAApB,EAAuB;MACrBJ,mBAAmB,CAACS,cAAc,CAACU,KAAf,CAAqB,CAArB,EAAwBlB,KAAxB,CAAD,CAAnB;IACD;EACF,CAJQ,EAIN,CAACM,MAAD,EAASE,cAAT,EAAyBJ,qBAAzB,EAAgDJ,KAAhD,CAJM,CAAT;EAMAnB,SAAS,CAAC,MAAM;IACdkB,mBAAmB,CAACS,cAAc,CAACU,KAAf,CAAqB,CAArB,EAAwB5B,kBAAxB,CAAD,CAAnB;IACAW,QAAQ,CAACX,kBAAD,CAAR;EACD,CAHQ,EAGN,CAACkB,cAAD,CAHM,CAAT;EAKA3B,SAAS,CAAC,MAAM;IACdwB,wBAAwB,CAAC,KAAD,CAAxB;EACD,CAFQ,EAEN,CAACX,GAAD,CAFM,CAAT;;EAIA,MAAMyB,cAAc,GAAIC,EAAD,IAAuB;IAC5C,MAAMC,QAAQ,GAAG1B,QAAQ,CAAC2B,QAAT,CAAkBF,EAAlB,CAAjB;IACA3B,QAAQ,CAACP,eAAe,CAAC;MAAEkC,EAAF;MAAMC;IAAN,CAAD,CAAhB,CAAR;EACD,CAHD;;EAKA,MAAME,eAAe,GAAIvB,KAAD,IAAmB;IACzCC,QAAQ,CAACD,KAAD,CAAR;IACA,MAAMwB,IAAI,GAAGhB,cAAc,CAACU,KAAf,CAAqB,CAArB,EAAwBlB,KAAxB,CAAb;IACAD,mBAAmB,CAACyB,IAAD,CAAnB;EACD,CAJD;;EAMA3C,SAAS,CAAC,MAAM;IACdkB,mBAAmB,CAACS,cAAc,CAACU,KAAf,CAAqB,CAArB,EAAwB5B,kBAAxB,CAAD,CAAnB;EACD,CAFQ,EAEN,CAACkB,cAAD,CAFM,CAAT;;EAIA,MAAMiB,aAAa,GAAG,MAAM;IAC1BpB,wBAAwB,CAAEqB,IAAD,IAAU,CAACA,IAAZ,CAAxB;IACAjB,IAAI;EACL,CAHD;;EAKA,oBACE;IAAK,SAAS,EAAEpB,OAAO,CAAC,mBAAD,CAAvB;IAAA,wBACE;MAAK,SAAS,EAAEA,OAAO,CAAC,cAAD,CAAvB;MAAA,wBACE;QAAK,SAAS,EAAEA,OAAO,CAAC,cAAD,CAAvB;QAAA,uBACE;UAAM,SAAS,EAAEA,OAAO,CAACoB,IAAzB;UAA+B,OAAO,EAAEgB,aAAxC;UAAA,wBACE;YAAA;UAAA;YAAA;YAAA;YAAA;UAAA,QADF,OACwCrB,qBAAqB,GAAG,UAAH,GAAgB,WAD7E;QAAA;UAAA;UAAA;UAAA;QAAA;MADF;QAAA;QAAA;QAAA;MAAA,QADF,eAOE;QAAI,SAAS,EAAEf,OAAO,CAACmC,IAAvB;QAAA,UACG1B,gBAAgB,CAAC6B,GAAjB,CAAsBC,OAAD,iBACpB,QAAC,WAAD;UAEE,IAAI,EAAEA,OAAO,CAACC,IAFhB;UAGE,KAAK,EAAED,OAAO,CAACf,KAHjB;UAIE,KAAK,EAAEe,OAAO,CAACE,KAJjB;UAKE,QAAQ,EAAEF,OAAO,CAACb,QALpB;UAME,KAAK,EAAEa,OAAO,CAACG,KANjB;UAOE,QAAQ,EAAEH,OAAO,CAACI,QAPpB;UAQE,eAAe,EAAE,MAAMb,cAAc,CAACS,OAAO,CAACR,EAAT,CARvC;UASE,iBAAiB,EAAEzB,QAAQ,CAAC2B,QAAT,CAAkBM,OAAO,CAACR,EAA1B,CATrB;UAUE,EAAE,EAAEQ,OAAO,CAACR;QAVd,GACOQ,OAAO,CAACR,EADf;UAAA;UAAA;UAAA;QAAA,QADD;MADH;QAAA;QAAA;QAAA;MAAA,QAPF;IAAA;MAAA;MAAA;MAAA;IAAA,QADF,EA0BGlB,iBAAiB,iBAChB,QAAC,QAAD;MACE,KAAK,EAAEF,KADT;MAEE,eAAe,EAAER,QAAQ,CAACW,MAF5B;MAGE,OAAO,EAAEoB,eAHX;MAIE,UAAU,EAAEjC;IAJd;MAAA;MAAA;MAAA;IAAA,QA3BJ;EAAA;IAAA;IAAA;IAAA;EAAA,QADF;AAqCD,CAvGD;;GAAMC,e;UACaR,W,EACDE,S,EACKD,W;;;KAHjBO,e;AAyGN,eAAeA,eAAf"},"metadata":{},"sourceType":"module"}